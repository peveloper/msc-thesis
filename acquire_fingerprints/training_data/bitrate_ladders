set terminal pngcairo size 1200, 800 dashed enhanced
plot_dir=ARG2
print plot_dir
filename=ARG1
set xlabel "Enforced Throughputs (bits/s)" offset -0.1,0,0
set ylabel "AVG Bitrate (bits/s)"
set decimal locale
set xtics font ", 10"
set ytics font ", 10"
set key outside
set grid
set format "%.1s%c"
set output sprintf("%s%s_ladder.png", plot_dir, filename)
stats_filename="stats/".filename
set print stats_filename
stats filename using (column(2) - column(4)) name "diff"
stats filename using (column(4)) name "obs"
rmse=sqrt(diff_sumsq / diff_records) / obs_mean
set title sprintf("Real vs. Reconstructed Bitrate Ladders ID: %s, Î¼-normalized RMSE=%.2f", filename, rmse) noenhanced
plot filename u 1:4 with lp t "real", '' u 1:2 with lp t "reconstructed"
