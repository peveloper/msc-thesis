set terminal pngcairo size 1000, 3500 dashed enhanced
plot_dir = "plots/"
filename = substr(files, 0, strstrt(files, "_") - 1)
set output sprintf("%s%s.png", plot_dir, filename)
set multiplot layout words(files),1 rowsfirst
set title sprintf("Fingerprints at various throughputs of ID: %s", filename)
set key outside
set key right top
set xlabel "Playing time (s)"
set ylabel "Size of ADUs (bytes)"
do for [i=1:words(files)] {
    file = word(files, i)
    plot file with impulses lt i title file[strstrt(file, "_") + 1:strstrt(file, ".") - 1].' kbps' 
}
unset multiplot
